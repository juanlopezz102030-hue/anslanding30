<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>CAYO URUGUAY - BIENVENIDO</title>

  <!-- Preload del LCP: poster + video principal -->
  <link rel="preload" href="bet30-preview.jpg" as="image" fetchpriority="high">
  <link rel="preload" href="bet30-preview.mp4" as="video" fetchpriority="high">
  <!-- Preload de los otros videos para que descarguen desde el inicio -->
  <link rel="preload" href="ganamos-preview.mp4" as="video">
  <link rel="preload" href="rhinoplay-preview.mp4" as="video">

  <style>
    :root {
      --card-height: 55vh;
      --card-width: calc(var(--card-height) * 9 / 16);
      --card-radius: 20px;
      --aura-size: 30px;
    }

    html, body {
      margin: 0;
      padding: 0;
      height: 100%;
      background: radial-gradient(circle at top left, #140032 0%, #04010e 100%);
      overflow: hidden;
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Ubuntu, "Helvetica Neue", Arial, "Noto Sans", "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", sans-serif;
      color: #fff;
    }

    .page-aura {
      position: fixed;
      inset: -40vh -10vw;
      background:
        radial-gradient(circle at 0% 0%, rgba(255,0,198,0.36), transparent 65%),
        radial-gradient(circle at 100% 0%, rgba(0,210,255,0.35), transparent 65%),
        radial-gradient(circle at 50% 100%, rgba(102,0,255,0.22), transparent 70%);
      opacity: 0.82;
      pointer-events: none;
      filter: blur(32px);
      transform: translate3d(0,0,0);
      animation: pageAuraPulse 16s ease-in-out infinite alternate;
      z-index: -1;
    }

    @keyframes pageAuraPulse {
      0% { transform: translate3d(0,0,0) scale(1); opacity:0.7; }
      50% { transform: translate3d(0,-2%,0) scale(1.05); opacity:0.95; }
      100% { transform: translate3d(0,1.5%,0) scale(1.02); opacity:0.8; }
    }

    @media (prefers-reduced-motion: reduce) {
      .page-aura, .aura { animation: none !important; }
    }

    /* Carrusel */
    #carousel {
      display: flex;
      overflow-x: auto;
      scroll-snap-type: x mandatory;
      scroll-behavior: smooth;
      -webkit-overflow-scrolling: touch;
      padding: 40px 0 64px;
      gap: 0;
      scrollbar-width: none;
      -ms-overflow-style: none;
      overscroll-behavior-x: contain;
      touch-action: pan-x;
    }
    #carousel::-webkit-scrollbar { display: none; }

    .card-wrapper {
      position: relative;
      flex: 0 0 auto;
      scroll-snap-align: center;
      width: var(--card-width);
      height: var(--card-height);
      margin: 0 10px;
    }

    .aura {
      position: absolute;
      top: calc(-1 * var(--aura-size) / 2);
      left: calc(-1 * var(--aura-size) / 2);
      right: calc(-1 * var(--aura-size) / 2);
      bottom: calc(-1 * var(--aura-size) / 2);
      border-radius: calc(var(--card-radius) + var(--aura-size));
      background:
        radial-gradient(circle at 30% 30%, rgba(255, 0, 200, 0.6), transparent 70%),
        radial-gradient(circle at 70% 70%, rgba(0, 200, 255, 0.6), transparent 70%);
      filter: blur(25px);
      z-index: 0;
      animation: auraPulse 6s ease-in-out infinite;
      pointer-events: none;
    }

    @keyframes auraPulse {
      0% { opacity:.7; transform:scale(1) }
      50% { opacity:1; transform:scale(1.05) }
      100%{ opacity:.7; transform:scale(1) }
    }

    .card {
      position: relative;
      width: 100%;
      height: 100%;
      border-radius: var(--card-radius);
      overflow: hidden;
      box-shadow: 0 4px 20px rgba(0,0,0,.6);
      z-index: 1;
      background: #0b0b12;
    }

    .card video,
    .card img.card-poster {
      position: absolute;
      inset: 0;
      width: 100%;
      height: 100%;
      object-fit: cover;
      display: block;
    }

    .card img.card-poster {
      z-index: 2;
      transition: opacity .28s ease-out;
      background:#000;
    }

    .card.card-playing img.card-poster {
      opacity: 0;
      pointer-events: none;
    }

    .hero-video {
      background:#000;
    }

    /* Aviso scroller */
    .notice-wrap{
      position: relative;
      display: block;
      margin: 18px 0 10px;
      height: 24px;
      overflow: hidden;
    }
    .notice-rail{
      display: inline-flex;
      gap: 40px;
      align-items: center;
      white-space: nowrap;
      will-change: transform;
      animation: noticeSlide 20s linear infinite;
    }
    .notice-item{
      font: 800 13px/24px system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
      letter-spacing: .35px;
      color: rgba(255,255,255,.92);
    }
    .notice-item .dim{ color: rgba(255,255,255,.65); font-weight: 700; }
    .notice-dot{ opacity:.45; margin: 0 12px; }

    @keyframes noticeSlide{ 0%{ transform: translateX(0) } 100%{ transform: translateX(-50%) } }
    @media (min-width:768px){
      .notice-wrap{ height: 26px }
      .notice-item{ font-size:14px; line-height:26px }
    }

    /* CTA WhatsApp */
    .wa-cta-wrap{
      display:flex;
      justify-content:center;
      margin: 56px 0 40px;
    }
    .wa-cta{
      position: relative;
      z-index: 5;
      display:flex;
      align-items:center;
      gap:10px;
      width: min(88vw, 680px);
      padding: 14px 18px;
      border-radius: 16px;
      background:#25D366;
      color:#0b2b13;
      font: 700 16px/1.3 system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
      text-decoration:none;
      box-shadow: 0 8px 22px rgba(37,211,102,.35);
      animation: floatCTA 3s ease-in-out infinite, glowPulse 2.6s ease-in-out infinite;
    }
    .wa-text{ flex:1; text-align:center; white-space:nowrap; }

    .wa-logo{
      width:26px;
      height:26px;
      border-radius:50%;
      display:flex;
      align-items:center;
      justify-content:center;
      overflow:hidden;
      flex-shrink:0;
    }
    .wa-logo svg{
      width:100%;
      height:100%;
      display:block;
    }

    @keyframes floatCTA { 0%{transform:translateY(0)} 50%{transform:translateY(-6px)} 100%{transform:translateY(0)} }
    @keyframes glowPulse {
      0% { box-shadow: 0 8px 22px rgba(37,211,102,.25), 0 0 0 rgba(37,211,102,0); }
      50% { box-shadow: 0 10px 26px rgba(37,211,102,.45), 0 0 18px rgba(37,211,102,.35); }
      100% { box-shadow: 0 8px 22px rgba(37,211,102,.25), 0 0 0 rgba(37,211,102,0); }
    }

    @media (min-width: 768px){
      .wa-cta-wrap{ margin:64px 0 48px }
      .wa-cta{ width:min(80vw,760px); font-size:17px; }
      .wa-logo{ width:28px; height:28px; }
    }

    .notice-rail{
      -webkit-mask-image: linear-gradient(90deg, rgba(0,0,0,0) 0%, rgba(0,0,0,1) 10%, rgba(0,0,0,1) 90%, rgba(0,0,0,0) 100%);
      mask-image: linear-gradient(90deg, rgba(0,0,0,0) 0%, rgba(0,0,0,1) 10%, rgba(0,0,0,1) 90%, rgba(0,0,0,0) 100%);
      -webkit-mask-repeat: no-repeat;
      mask-repeat: no-repeat;
    }
  </style>

  <!-- Meta Pixel Code (copiado de A) -->
  <script>
    !function(f,b,e,v,n,t,s)
    {if(f.fbq)return;n=f.fbq=function(){n.callMethod?
    n.callMethod.apply(n,arguments):n.queue.push(arguments)};
    if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
    n.queue=[];t=b.createElement(e);t.async=!0;
    t.src=v;s=b.getElementsByTagName(e)[0];
    s.parentNode.insertBefore(t,s)}(window, document,'script',
    'https://connect.facebook.net/en_US/fbevents.js');
     fbq('init', '767728059169192');
     fbq('track', 'PageView');
  </script>
  <noscript><img height="1" width="1" style="display:none"
    src="https://www.facebook.com/tr?id=767728059169192&ev=PageView&noscript=1"
  /></noscript>
  <!-- End Meta Pixel Code -->

</head>
<body>
  <div class="page-aura" aria-hidden="true"></div>

  <div id="carousel" aria-label="Promociones destacadas">
    <div class="card-wrapper">
      <div class="aura" aria-hidden="true"></div>
      <div class="card">
        <img class="card-poster" src="bet30-preview.jpg" alt="Promo CAYO Uruguay 1" loading="eager">
        <video class="hero-video"
               autoplay
               loop
               muted
               playsinline
               preload="auto">
          <source src="bet30-preview.mp4" type="video/mp4" />
        </video>
      </div>
    </div>

    <div class="card-wrapper">
      <div class="aura" aria-hidden="true"></div>
      <div class="card">
        <img class="card-poster" src="ganamos-preview.jpg" alt="Promo CAYO Uruguay 2" loading="lazy">
        <video class="hero-video"
               muted
               playsinline
               preload="auto"
               data-autoplay-visible="true">
          <source src="ganamos-preview.mp4" type="video/mp4" />
        </video>
      </div>
    </div>

    <div class="card-wrapper">
      <div class="aura" aria-hidden="true"></div>
      <div class="card">
        <img class="card-poster" src="rhinoplay-preview.jpg" alt="Promo CAYO Uruguay 3" loading="lazy">
        <video class="hero-video"
               muted
               playsinline
               preload="auto"
               data-autoplay-visible="true">
          <source src="rhinoplay-preview.mp4" type="video/mp4" />
        </video>
      </div>
    </div>
  </div>

  <!-- Aviso -->
  <div class="notice-wrap" aria-label="Aviso importante">
    <div class="notice-rail">
      <span class="notice-item">CAYÓ URUGUAY<span class="notice-dot">•</span><span class="dim">MÍNIMO 300 UYU</span><span class="notice-dot">•</span>RETIROS 12:00 A 23:30</span>
      <span class="notice-item">CAYÓ URUGUAY<span class="notice-dot">•</span><span class="dim">MÍNIMO 300 UYU</span><span class="notice-dot">•</span>RETIROS 12:00 A 23:30</span>
      <span class="notice-item">CAYÓ URUGUAY<span class="notice-dot">•</span><span class="dim">MÍNIMO 300 UYU</span><span class="notice-dot">•</span>RETIROS 12:00 A 23:30</span>
      <span class="notice-item">CAYÓ URUGUAY<span class="notice-dot">•</span><span class="dim">MÍNIMO 300 UYU</span><span class="notice-dot">•</span>RETIROS 12:00 A 23:30</span>
    </div>
    <div class="notice-rail">
      <span class="notice-item">CAYÓ URUGUAY<span class="notice-dot">•</span><span class="dim">MÍNIMO 300 UYU</span><span class="notice-dot">•</span>RETIROS 12:00 A 23:30</span>
      <span class="notice-item">CAYÓ URUGUAY<span class="notice-dot">•</span><span class="dim">MÍNIMO 300 UYU</span><span class="notice-dot">•</span>RETIROS 12:00 A 23:30</span>
      <span class="notice-item">CAYÓ URUGUAY<span class="notice-dot">•</span><span class="dim">MÍNIMO 300 UYU</span><span class="notice-dot">•</span>RETIROS 12:00 A 23:30</span>
      <span class="notice-item">CAYÓ URUGUAY<span class="notice-dot">•</span><span class="dim">MÍNIMO 300 UYU</span><span class="notice-dot">•</span>RETIROS 12:00 A 23:30</span>
    </div>
  </div>

  <!-- CTA WhatsApp -->
  <div class="wa-cta-wrap">
    <a class="wa-cta"
       href="https://api.whatsapp.com/send?phone=59899194848&text=Hola%20quiero%20mi%20bono%20del%2020%%20para%20jugar"
       target="_blank"
       rel="noopener"
       aria-label="Escribinos por WhatsApp"
       onclick="(window.fbq) && fbq('track','WhatsappClick'); return true;"
       id="waCta">
      <span class="wa-logo" aria-hidden="true">
        <!-- Icono WhatsApp SVG inline -->
        <svg viewBox="0 0 32 32">
          <defs>
            <linearGradient id="waGrad" x1="0%" y1="0%" x2="0%" y2="100%">
              <stop offset="0%" stop-color="#61fd7d"/>
              <stop offset="100%" stop-color="#21c960"/>
            </linearGradient>
          </defs>
          <path fill="#E5E5E5" d="M16 1.6C8.76 1.6 2.9 7.46 2.9 14.7c0 2.26.61 4.46 1.77 6.4L2 30l9.09-2.6c1.82.54 3.6.82 5.37.82 7.24 0 13.1-5.86 13.1-13.1C29.56 7.46 23.7 1.6 16 1.6z"/>
          <circle cx="16" cy="15.9" r="11.5" fill="url(#waGrad)"/>
          <path fill="#FFF" d="M13.2 9.9c-.27-.61-.55-.62-.8-.63l-.68-.01c-.24 0-.63.09-.96.45-.33.36-1.27 1.24-1.27 3.02 0 1.78 1.3 3.5 1.48 3.74.18.24 2.51 4.02 6.19 5.48 3.06 1.21 3.69.97 4.36.91.67-.06 2.15-.88 2.45-1.73.3-.85.3-1.57.21-1.73-.09-.15-.33-.24-.68-.42-.36-.18-2.15-1.06-2.48-1.18-.33-.12-.57-.18-.8.18-.24.36-.92 1.18-1.13 1.42-.21.24-.42.27-.78.09-.36-.18-1.51-.56-2.87-1.78-1.06-.95-1.78-2.12-1.99-2.48-.21-.36-.02-.55.16-.73.17-.17.4-.45.6-.67.2-.22.27-.36.4-.6.12-.24.06-.45-.03-.63-.09-.18-.8-2.0-1.1-2.72z"/>
        </svg>
      </span>
      <span class="wa-text">Escribinos por WhatsApp</span>
    </a>
  </div>

  <!-- Script: posters + autoplay -->
  <script>
    document.addEventListener('DOMContentLoaded', function () {
      const carousel = document.getElementById('carousel');
      const videos = Array.from(document.querySelectorAll('#carousel .card video.hero-video'));
      if (!videos.length) return;

      // cuando un video empieza a reproducirse, ocultamos su poster
      videos.forEach(function(video){
        const card = video.closest('.card');
        if (!card) return;
        video.addEventListener('playing', function(){
          card.classList.add('card-playing');
        });
      });

      // primer video: reproducir al toque
      const first = videos[0];
      if (first) {
        try {
          const p = first.play();
          if (p && typeof p.then === 'function') p.catch(function(){});
        } catch(e) {}
      }

      const others = videos.slice(1).filter(v => v.hasAttribute('data-autoplay-visible'));

      function autoplayVideo(v){
        if (!v || v.dataset.autoplayed) return;
        v.dataset.autoplayed = '1';
        try {
          const p = v.play();
          if (p && typeof p.then === 'function') p.catch(function(){});
        } catch(e){}
      }

      if ('IntersectionObserver' in window) {
        const io = new IntersectionObserver(function(entries){
          entries.forEach(function(entry){
            if (entry.isIntersecting) {
              autoplayVideo(entry.target);
              io.unobserve(entry.target);
            }
          });
        }, { root: carousel, threshold: 0.6 });

        others.forEach(v => io.observe(v));
      } else {
        others.forEach(autoplayVideo);
      }
    });
  </script>

  <!-- Auto-slide del carrusel (1.9 segundos) -->
  <script>
    (function(){
      const carousel = document.getElementById('carousel');
      if (!carousel) return;
      const STEP_MS = 1900;
      const SCROLL_BEHAVIOR = 'smooth';
      let timer = null;
      let pausedUntil = 0;

      function cardStep() {
        const firstCard = carousel.querySelector('.card-wrapper');
        if (!firstCard) return 0;
        const style = getComputedStyle(firstCard);
        const marginL = parseFloat(style.marginLeft) || 0;
        const marginR = parseFloat(style.marginRight) || 0;
        return firstCard.getBoundingClientRect().width + marginL + marginR;
      }

      function next() {
        const step = cardStep();
        if (!step) return;
        const scrollLeft = carousel.scrollLeft;
        const scrollWidth = carousel.scrollWidth;
        const clientWidth = carousel.clientWidth;

        if (scrollLeft + clientWidth >= scrollWidth - step * 0.6) {
          carousel.scrollTo({ left: 0, behavior: SCROLL_BEHAVIOR });
        } else {
          carousel.scrollTo({ left: scrollLeft + step, behavior: SCROLL_BEHAVIOR });
        }
      }

      function start() {
        stop();
        timer = setInterval(function(){
          const now = Date.now();
          if (now < pausedUntil) return;
          next();
        }, STEP_MS);
      }
      function stop() { if (timer) { clearInterval(timer); timer = null; } }

      ['pointerdown','touchstart','mouseenter','focusin'].forEach(function(evt){
        carousel.addEventListener(evt, function(){ pausedUntil = Date.now() + 7000; }, { passive: true });
      });

      window.addEventListener('resize', function(){ pausedUntil = Date.now() + 1000; }, { passive: true });

      const startWhenVisible = function(){
        const rect = carousel.getBoundingClientRect();
        if (rect.bottom > 0 && rect.top < innerHeight) {
          start();
          document.removeEventListener('scroll', startWhenVisible, true);
        }
      };
      document.addEventListener('scroll', startWhenVisible, true);
      startWhenVisible();
      setTimeout(start, 1000);
    })();
  </script>

  <!-- Rotación de números de WhatsApp (copiada/configurada como en A) -->
  <script>
  (function() {
    var btn = document.getElementById('waCta');
    if (!btn) return;

    var numbers = ['59899109046'];
    var ROTATE_MS = 7 * 60 * 1000; // 7 minutos
    var idx = 0;

    function applyPhone(phone) {
      try {
        var url = new URL(btn.href);
        url.searchParams.set('phone', phone);
        btn.href = url.toString();
      } catch (e) {
        btn.href = 'https://api.whatsapp.com/send?phone=' + phone +
          '&text=Hola%20quiero%20mi%20bono%20del%2020%%20para%20jugar';
      }
      btn.setAttribute('data-phone', phone);
    }

    // inicial
    applyPhone(numbers[0]);

    setInterval(function() {
      idx = (idx + 1) % numbers.length;
      applyPhone(numbers[idx]);
    }, ROTATE_MS);
  })();
  </script>

  <!-- Tracking click WhatsApp + envío a backend -->
  <script>
  (function() {
    var btn = document.getElementById('waCta');
    if (!btn) return;
    btn.addEventListener('click', function() {
      try {
        var eventId = 'wa_click_' + Date.now() + '_' + Math.random().toString(36).slice(2);
        if (typeof fbq === 'function') { fbq('trackCustom', 'WhatsAppClick', {}, { eventID: eventId }); }
        try {
          var qs = new URLSearchParams(window.location.search);
          var utm = new URLSearchParams();
          ['utm_source','utm_medium','utm_campaign','utm_content','utm_term','fbclid'].forEach(function(k){
            if (qs.get(k)) utm.set(k, qs.get(k));
          });

          // número activo en este momento
          var phone = btn.getAttribute('data-phone');
          if (!phone) {
            try {
              var hrefUrl = new URL(btn.href);
              phone = hrefUrl.searchParams.get('phone') || '';
            } catch(e){}
          }
          if (!phone) phone = '59899194848';

          utm.set('name','WhatsAppClick');
          utm.set('dest', phone);
          utm.set('event_id', eventId);
          var url = 'https://backend-1-x8dd.onrender.com/track/custom?' + utm.toString();
          if (navigator.sendBeacon) { navigator.sendBeacon(url); }
          else { fetch(url, { method:'GET', mode:'no-cors', keepalive:true }).catch(function(){}); }
        } catch(e){}
      } catch(e) {}
    }, false);
  })();
  </script>

</body>
</html>

