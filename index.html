<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>CAYO URUGUAY - BIENVENIDO</title>

  <!-- Preload del LCP: poster + video principal -->
  <link rel="preload"
        href="bet30-preview.jpg"
        as="image"
        fetchpriority="high">

  <link rel="preload"
        href="bet30-preview.mp4"
        as="video"
        fetchpriority="high">

  <style>
    :root {
      --card-height: 55vh;
      --card-width: calc(var(--card-height) * 9 / 16);
      --card-radius: 20px;
      --aura-size: 30px;
    }

    html, body {
      margin: 0;
      padding: 0;
      height: 100%;
      background: radial-gradient(circle at top left, #140032 0%, #04010e 100%);
      overflow: hidden;
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Ubuntu, "Helvetica Neue", Arial, "Noto Sans", "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", sans-serif;
      color: #fff;
    }

    .page-aura {
      position: fixed;
      inset: -40vh -10vw;
      background:
        radial-gradient(circle at 0% 0%, rgba(255,0,198,0.36), transparent 65%),
        radial-gradient(circle at 100% 0%, rgba(0,210,255,0.35), transparent 65%),
        radial-gradient(circle at 50% 100%, rgba(102,0,255,0.22), transparent 70%);
      opacity: 0.82;
      pointer-events: none;
      filter: blur(32px);
      transform: translate3d(0,0,0);
      animation: pageAuraPulse 16s ease-in-out infinite alternate;
      z-index: -1;
    }

    @keyframes pageAuraPulse {
      0% { transform: translate3d(0,0,0) scale(1); opacity:0.7; }
      50% { transform: translate3d(0,-2%,0) scale(1.05); opacity:0.95; }
      100% { transform: translate3d(0,1.5%,0) scale(1.02); opacity:0.8; }
    }

    @media (prefers-reduced-motion: reduce) {
      .page-aura, .aura, .wa-chip, .wa-chip::before { animation: none !important; }
    }

    /* Carrusel */
    #carousel {
      display: flex;
      overflow-x: auto;
      scroll-snap-type: x mandatory;
      scroll-behavior: smooth;
      -webkit-overflow-scrolling: touch;
      padding: 40px 0 64px;
      gap: 0;
      scrollbar-width: none;
      -ms-overflow-style: none;
      overscroll-behavior-x: contain;
      touch-action: pan-x;
    }
    #carousel::-webkit-scrollbar { display: none; }

    .card-wrapper {
      position: relative;
      flex: 0 0 auto;
      scroll-snap-align: center;
      width: var(--card-width);
      height: var(--card-height);
      margin: 0 10px;
    }

    .aura {
      position: absolute;
      top: calc(-1 * var(--aura-size) / 2);
      left: calc(-1 * var(--aura-size) / 2);
      right: calc(-1 * var(--aura-size) / 2);
      bottom: calc(-1 * var(--aura-size) / 2);
      border-radius: calc(var(--card-radius) + var(--aura-size));
      background:
        radial-gradient(circle at 30% 30%, rgba(255, 0, 200, 0.6), transparent 70%),
        radial-gradient(circle at 70% 70%, rgba(0, 200, 255, 0.6), transparent 70%);
      filter: blur(25px);
      z-index: 0;
      animation: auraPulse 6s ease-in-out infinite;
      pointer-events: none;
    }

    @keyframes auraPulse {
      0% { opacity:.7; transform:scale(1) }
      50% { opacity:1; transform:scale(1.05) }
      100%{ opacity:.7; transform:scale(1) }
    }

    .card {
      position: relative;
      width:100%;
      height:100%;
      border-radius:var(--card-radius);
      overflow:hidden;
      box-shadow:0 4px 20px rgba(0,0,0,.6);
      z-index:1;
      background:#0b0b12;
    }

    .card img,
    .card video {
      width:100%;
      height:100%;
      object-fit:cover;
      display:block;
    }

    .hero-video {
      background:#000;
    }

    /* Aviso scroller */
    .notice-wrap{
      position: relative;
      display: block;
      margin: 18px 0 10px;
      height: 24px;
      overflow: hidden;
    }
    .notice-rail{
      display: inline-flex;
      gap: 40px;
      align-items: center;
      white-space: nowrap;
      will-change: transform;
      animation: noticeSlide 20s linear infinite;
    }
    .notice-item{
      font: 800 13px/24px system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
      letter-spacing: .35px;
      color: rgba(255,255,255,.92);
    }
    .notice-item .dim{ color: rgba(255,255,255,.65); font-weight: 700; }
    .notice-dot{ opacity:.45; margin: 0 12px; }

    @keyframes noticeSlide{ 0%{ transform: translateX(0) } 100%{ transform: translateX(-50%) } }
    @media (min-width:768px){
      .notice-wrap{ height: 26px }
      .notice-item{ font-size:14px; line-height:26px }
    }

    /* CTA WhatsApp debajo del slideshow (centrado, ancho, animado) */
    .wa-cta-wrap{
      display:flex;
      justify-content:center;
      margin: 56px 0 40px;
    }
    .wa-cta{
      position: relative;
      z-index: 5;
      display:flex;
      align-items:center;
      gap:10px;
      width: min(88vw, 680px);
      padding: 14px 18px;
      border-radius: 16px;
      background:#25D366;
      color:#0b2b13;
      font: 700 16px/1.3 system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
      text-decoration:none;
      box-shadow: 0 8px 22px rgba(37,211,102,.35);
      animation: floatCTA 3s ease-in-out infinite, glowPulse 2.6s ease-in-out infinite;
    }
    .wa-cta .wa-logo{ height:24px; width:auto; display:inline-block; }
    .wa-cta .wa-text{ flex:1; text-align:center; white-space:nowrap; }

    @keyframes floatCTA { 0%{transform:translateY(0)} 50%{transform:translateY(-6px)} 100%{transform:translateY(0)} }
    @keyframes glowPulse {
      0% { box-shadow: 0 8px 22px rgba(37,211,102,.25), 0 0 0 rgba(37,211,102,0); }
      50% { box-shadow: 0 10px 26px rgba(37,211,102,.45), 0 0 18px rgba(37,211,102,.35); }
      100% { box-shadow: 0 8px 22px rgba(37,211,102,.25), 0 0 0 rgba(37,211,102,0); }
    }

    @media (min-width: 768px){
      .wa-cta-wrap{ margin:64px 0 48px }
      .wa-cta{ width:min(80vw,760px); font-size:17px; }
      .wa-cta .wa-logo{ height:26px; }
    }

    /* Fades laterales para notice */
    .notice-wrap{ background: transparent; }
    .notice-rail{
      -webkit-mask-image: linear-gradient(90deg, rgba(0,0,0,0) 0%, rgba(0,0,0,1) 10%, rgba(0,0,0,1) 90%, rgba(0,0,0,0) 100%);
      mask-image: linear-gradient(90deg, rgba(0,0,0,0) 0%, rgba(0,0,0,1) 10%, rgba(0,0,0,1) 90%, rgba(0,0,0,0) 100%);
      -webkit-mask-repeat: no-repeat;
      mask-repeat: no-repeat;
    }
  </style>

  <!-- Meta Pixel Code -->
  <script>
    !function(f,b,e,v,n,t,s)
    {if(f.fbq)return;n=f.fbq=function(){n.callMethod?
    n.callMethod.apply(n,arguments):n.queue.push(arguments)};
    if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
    n.queue=[];t=b.createElement(e);t.async=!0;
    t.src=v;s=b.getElementsByTagName(e)[0];
    s.parentNode.insertBefore(t,s)}(window, document,'script',
    'https://connect.facebook.net/en_US/fbevents.js');
     fbq('init', '767728059169192');
     fbq('track', 'PageView');
  </script>
  <noscript><img height="1" width="1" style="display:none"
    src="https://www.facebook.com/tr?id=767728059169192&ev=PageView&noscript=1"
  /></noscript>
  <!-- End Meta Pixel Code -->

</head>
<body>
  <div class="page-aura" aria-hidden="true"></div>

  <div id="carousel" aria-label="Promociones destacadas">
    <!-- HERO: ahora con src directo + preload="auto" -->
    <div class="card-wrapper">
      <div class="aura" aria-hidden="true"></div>
      <div class="card">
        <video class="hero-video"
               autoplay
               loop
               muted
               playsinline
               poster="bet30-preview.jpg"
               preload="auto">
          <source src="bet30-preview.mp4" type="video/mp4" />
        </video>
      </div>
    </div>

    <!-- Siguen los otros dos con data-src para lazy-load -->
    <div class="card-wrapper">
      <div class="aura" aria-hidden="true"></div>
      <div class="card">
        <video class="hero-video" autoplay loop muted playsinline poster="ganamos-preview.jpg">
          <source data-src="ganamos-preview.mp4" type="video/mp4" />
        </video>
      </div>
    </div>
    <div class="card-wrapper">
      <div class="aura" aria-hidden="true"></div>
      <div class="card">
        <video class="hero-video" autoplay loop muted playsinline poster="rhinoplay-preview.jpg">
          <source data-src="rhinoplay-preview.mp4" type="video/mp4" />
        </video>
      </div>
    </div>
  </div>

  <!-- Aviso con fade (scroll) -->
  <div class="notice-wrap" aria-label="Aviso importante">
    <div class="notice-rail">
      <span class="notice-item">CAYÓ URUGUAY<span class="notice-dot">•</span><span class="dim">MÍNIMO 300 UYU</span><span class="notice-dot">•</span>RETIROS 12:00 A 23:30</span>
      <span class="notice-item">CAYÓ URUGUAY<span class="notice-dot">•</span><span class="dim">MÍNIMO 300 UYU</span><span class="notice-dot">•</span>RETIROS 12:00 A 23:30</span>
      <span class="notice-item">CAYÓ URUGUAY<span class="notice-dot">•</span><span class="dim">MÍNIMO 300 UYU</span><span class="notice-dot">•</span>RETIROS 12:00 A 23:30</span>
      <span class="notice-item">CAYÓ URUGUAY<span class="notice-dot">•</span><span class="dim">MÍNIMO 300 UYU</span><span class="notice-dot">•</span>RETIROS 12:00 A 23:30</span>
    </div>
    <div class="notice-rail">
      <span class="notice-item">CAYÓ URUGUAY<span class="notice-dot">•</span><span class="dim">MÍNIMO 300 UYU</span><span class="notice-dot">•</span>RETIROS 12:00 A 23:30</span>
      <span class="notice-item">CAYÓ URUGUAY<span class="notice-dot">•</span><span class="dim">MÍNIMO 300 UYU</span><span class="notice-dot">•</span>RETIROS 12:00 A 23:30</span>
      <span class="notice-item">CAYÓ URUGUAY<span class="notice-dot">•</span><span class="dim">MÍNIMO 300 UYU</span><span class="notice-dot">•</span>RETIROS 12:00 A 23:30</span>
      <span class="notice-item">CAYÓ URUGUAY<span class="notice-dot">•</span><span class="dim">MÍNIMO 300 UYU</span><span class="notice-dot">•</span>RETIROS 12:00 A 23:30</span>
    </div>
  </div>

  <!-- CTA WhatsApp debajo del slideshow -->
  <div class="wa-cta-wrap">
    <a class="wa-cta" href="https://api.whatsapp.com/send?phone=59891994768&text=Hola%20quiero%20mi%20bono%20del%2020%%20para%20jugar" target="_blank" rel="noopener" aria-label="Escribinos por WhatsApp" onclick="(window.fbq) fbq('track','WhatsappClick'); return true;" id="waCta">
      <img class="wa-logo" src="whatsapp.png" loading="lazy" alt="WhatsApp" />
      <span class="wa-text">Escribinos por WhatsApp</span>
    </a>
  </div>

  <!-- Lazy load de videos del carrusel -->
  <script>
    // Lazy load de videos del carrusel manteniendo la estructura original
    document.addEventListener('DOMContentLoaded', function () {
      var videos = document.querySelectorAll('#carousel .card video.hero-video');
      if (!videos.length) return;

      function loadVideo(video) {
        if (!video || video.dataset.loaded) return;
        var source = video.querySelector('source[data-src]');
        if (!source) return;

        // Si ya tiene src no volvemos a cargarlo
        if (!source.src) {
          source.src = source.dataset.src;
        }
        video.load();
        // Intentar reproducir; si el navegador bloquea autoplay no pasa nada
        var playPromise = video.play && video.play();
        if (playPromise && typeof playPromise.then === 'function') {
          playPromise.catch(function(){});
        }
        video.dataset.loaded = '1';
      }

      // No tocamos el primer video (ya tiene src + preload="auto")
      // El resto sólo cuando entran en viewport
      if ('IntersectionObserver' in window) {
        var io = new IntersectionObserver(function (entries) {
          entries.forEach(function (entry) {
            if (entry.isIntersecting) {
              loadVideo(entry.target);
              io.unobserve(entry.target);
            }
          });
        }, {
          root: document.getElementById('carousel'),
          threshold: 0.6
        });

        for (var i = 1; i < videos.length; i++) {
          io.observe(videos[i]);
        }
      } else {
        // Fallback: cargar todos los videos si el navegador es muy viejo
        for (var j = 1; j < videos.length; j++) {
          loadVideo(videos[j]);
        }
      }
    });
  </script>

  <!-- Auto-slide del carrusel -->
  <script>
    (function(){
      const carousel = document.getElementById('carousel');
      if (!carousel) return;
      const STEP_MS = 4000;       // tiempo entre slides
      const SCROLL_BEHAVIOR = 'smooth';
      let timer = null;
      let pausedUntil = 0;

      function cardStep() {
        const firstCard = carousel.querySelector('.card-wrapper');
        if (!firstCard) return 0;
        const style = getComputedStyle(firstCard);
        const marginL = parseFloat(style.marginLeft) || 0;
        const marginR = parseFloat(style.marginRight) || 0;
        return firstCard.getBoundingClientRect().width + marginL + marginR;
      }

      function next() {
        const step = cardStep();
        if (!step) return;
        const { scrollLeft, scrollWidth, clientWidth } = carousel;
        // Si estamos cerca del final, volvemos al inicio
        if (scrollLeft + clientWidth >= scrollWidth - step * 0.6) {
          carousel.scrollTo({ left: 0, behavior: SCROLL_BEHAVIOR });
        } else {
          carousel.scrollTo({ left: scrollLeft + step, behavior: SCROLL_BEHAVIOR });
        }
      }

      function start() {
        stop();
        timer = setInterval(() => {
          const now = Date.now();
          if (now < pausedUntil) return; // respetar pausa por interacción
          next();
        }, STEP_MS);
      }
      function stop() { if (timer) { clearInterval(timer); timer = null; } }

      // Pausar en interacción del usuario y reanudar luego
      ['pointerdown','touchstart','mouseenter','focusin'].forEach(evt => {
        carousel.addEventListener(evt, () => { pausedUntil = Date.now() + 7000; }, { passive: true });
      });

      // Recalcular al rotar / cambiar tamaño
      window.addEventListener('resize', () => { pausedUntil = Date.now() + 1000; }, { passive: true });

      // Iniciar cuando el carrusel esté en viewport (por si se carga abajo)
      const startWhenVisible = () => {
        const rect = carousel.getBoundingClientRect();
        if (rect.bottom > 0 && rect.top < innerHeight) {
          start();
          document.removeEventListener('scroll', startWhenVisible, true);
        }
      };
      document.addEventListener('scroll', startWhenVisible, true);
      startWhenVisible();
      // fallback por si no se dispara scroll
      setTimeout(start, 1000);
    })();
  </script>

  <!-- Tracking click WhatsApp -->
  <script>
  (function() {
    var btn = document.getElementById('waCta');
    if (!btn) return;
    btn.addEventListener('click', function() {
      try {
        var eventId = 'wa_click_' + Date.now() + '_' + Math.random().toString(36).slice(2);
        if (typeof fbq === 'function') { fbq('trackCustom', 'WhatsAppClick', {}, { eventID: eventId }); }
        // Optional: backend mirror for CAPI si lo usás
        try {
          var qs = new URLSearchParams(window.location.search);
          var utm = new URLSearchParams();
          ['utm_source','utm_medium','utm_campaign','utm_content','utm_term','fbclid'].forEach(function(k){
            if (qs.get(k)) utm.set(k, qs.get(k));
          });
          utm.set('name','WhatsAppClick');
          utm.set('dest','59891994768');
          utm.set('event_id', eventId);
          var url = 'https://backend-1-x8dd.onrender.com/track/custom?' + utm.toString();
          if (navigator.sendBeacon) { navigator.sendBeacon(url); }
          else { fetch(url, { method:'GET', mode:'no-cors', keepalive:true }).catch(function(){}); }
        } catch(e){}
      } catch(e) {}
    }, false);
  })();
  </script>

</body>
</html>
